# è£…ç®±å’Œæ‹†ç®±

## åŒ…è£…ç±»ã€è£…ç®±ã€æ‹†ç®±

Java ä¸­ä¸ºæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†ç›¸åº”çš„åŒ…è£…ç±»ï¼Œå¦‚ä¸‹ï¼š

```
Byte <-> byte
Short <-> short
Integer <-> int
Long <-> long
Float <-> float
Double <-> double
Character <-> char
Boolean <-> boolean
```

å¼•å…¥åŒ…è£…ç±»çš„ç›®çš„å°±æ˜¯ï¼šæä¾›ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾—åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥ä¸å¼•ç”¨ç±»å‹äº’ç›¸è½¬æ¢ã€‚

åŸºæœ¬æ•°æ®ç±»å‹ä¸åŒ…è£…ç±»çš„è½¬æ¢è¢«ç§°ä¸º`è£…ç®±`å’Œ`æ‹†ç®±`ã€‚

- `è£…ç®±`ï¼ˆboxingï¼‰æ˜¯å°†å€¼ç±»å‹è½¬æ¢ä¸ºå¼•ç”¨ç±»å‹ã€‚ä¾‹å¦‚ï¼š`int` è½¬ `Integer`
    - è£…ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…ç±»çš„ `valueOf` æ–¹æ³•å®ç°çš„ã€‚
- `æ‹†ç®±`ï¼ˆunboxingï¼‰æ˜¯å°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºå€¼ç±»å‹ã€‚ä¾‹å¦‚ï¼š`Integer` è½¬ `int`
    - æ‹†ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…ç±»çš„ `xxxValue` æ–¹æ³•å®ç°çš„ã€‚ï¼ˆxxx ä»£è¡¨å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ã€‚

## è‡ªåŠ¨è£…ç®±ã€è‡ªåŠ¨æ‹†ç®±

è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±çš„æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬åœ¨ Java çš„å˜é‡èµ‹å€¼æˆ–è€…æ˜¯æ–¹æ³•è°ƒç”¨ç­‰æƒ…å†µä¸‹ä½¿ç”¨åŸå§‹ç±»å‹æˆ–è€…å¯¹è±¡ç±»å‹æ›´åŠ ç®€å•ç›´æ¥ã€‚å› ä¸ºè‡ªåŠ¨è£…ç®±ä¼šéšå¼åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå¾ªç¯ä½“ä¸­ï¼Œä¼šåˆ›å»ºæ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œè¿™æ ·ä¼šå¢åŠ  GC å‹åŠ›ï¼Œæ‹‰ä½ç¨‹åºçš„æ€§èƒ½ã€‚æ‰€ä»¥åœ¨å†™å¾ªç¯æ—¶ä¸€å®šè¦æ³¨æ„ä»£ç ï¼Œé¿å…å¼•å…¥ä¸å¿…è¦çš„è‡ªåŠ¨è£…ç®±æ“ä½œã€‚

```java
Integer i2 = 10; // è‡ªåŠ¨è£…ç®±
```

Java å¯¹äºè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„è®¾è®¡ï¼Œä¾èµ–äºä¸€ç§å«åšäº«å…ƒæ¨¡å¼çš„è®¾è®¡æ¨¡å¼ï¼ˆæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»äº†è§£ä¸€ä¸‹æºç ï¼Œè¿™é‡Œä¸å¯¹è®¾è®¡æ¨¡å¼å±•å¼€è¯¦è¿°ï¼‰ã€‚

> ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š[æ·±å…¥å‰–æ Java ä¸­çš„è£…ç®±å’Œæ‹†ç®±](https://www.cnblogs.com/dolphin0520/p/3780005.html)
>

## è£…ç®±ã€æ‹†ç®±çš„åº”ç”¨å’Œæ³¨æ„ç‚¹

## è£…ç®±ã€æ‹†ç®±åº”ç”¨åœºæ™¯

- ä¸€ç§æœ€æ™®é€šçš„åœºæ™¯æ˜¯ï¼šè°ƒç”¨ä¸€ä¸ª**å«ç±»å‹ä¸º `Object` å‚æ•°çš„æ–¹æ³•**ï¼Œè¯¥ `Object` å¯æ”¯æŒä»»æ„ç±»å‹ï¼ˆå› ä¸º `Object` æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼‰ï¼Œä»¥ä¾¿é€šç”¨ã€‚å½“ä½ éœ€è¦å°†ä¸€ä¸ªå€¼ç±»å‹ï¼ˆå¦‚ intï¼‰ä¼ å…¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `Integer` è£…ç®±ã€‚
- å¦ä¸€ç§ç”¨æ³•æ˜¯ï¼šä¸€ä¸ª**éæ³›å‹çš„å®¹å™¨**ï¼ŒåŒæ ·æ˜¯ä¸ºäº†ä¿è¯é€šç”¨ï¼Œè€Œå°†å…ƒç´ ç±»å‹å®šä¹‰ä¸º `Object`ã€‚äºæ˜¯ï¼Œè¦å°†å€¼ç±»å‹æ•°æ®åŠ å…¥å®¹å™¨æ—¶ï¼Œéœ€è¦è£…ç®±ã€‚
- å½“ `==` è¿ç®—ç¬¦çš„ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ“ä½œæ•°æ˜¯åŒ…è£…ç±»ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯è¡¨è¾¾å¼ï¼ˆå³åŒ…å«ç®—æœ¯è¿ç®—ï¼‰åˆ™æ¯”è¾ƒçš„æ˜¯æ•°å€¼ï¼ˆå³ä¼šè§¦å‘è‡ªåŠ¨æ‹†ç®±çš„è¿‡ç¨‹ï¼‰ã€‚

ã€ç¤ºä¾‹ã€‘è£…ç®±ã€æ‹†ç®±ç¤ºä¾‹

```java
Integer i1 = 10; // è‡ªåŠ¨è£…ç®±
Integer i2 = new Integer(10); // éè‡ªåŠ¨è£…ç®±
Integer i3 = Integer.valueOf(10); // éè‡ªåŠ¨è£…ç®±
int i4 = new Integer(10); // è‡ªåŠ¨æ‹†ç®±
int i5 = i2.intValue(); // éè‡ªåŠ¨æ‹†ç®±
System.out.println("i1 = [" + i1 + "]");
System.out.println("i2 = [" + i2 + "]");
System.out.println("i3 = [" + i3 + "]");
System.out.println("i4 = [" + i4 + "]");
System.out.println("i5 = [" + i5 + "]");
System.out.println("i1 == i2 is [" + (i1 == i2) + "]");
System.out.println("i1 == i4 is [" + (i1 == i4) + "]"); // è‡ªåŠ¨æ‹†ç®±
// Output:
// i1 = [10]
// i2 = [10]
// i3 = [10]
// i4 = [10]
// i5 = [10]
// i1 == i2 is [false]
// i1 == i4 is [true]
```

ã€è¯´æ˜ã€‘

ä¸Šé¢çš„ä¾‹å­ï¼Œè™½ç„¶ç®€å•ï¼Œä½†å´éšè—äº†è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œéè‡ªåŠ¨è£…ç®±ã€æ‹†ç®±çš„åº”ç”¨ã€‚ä»ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ˜æ˜æ‰€æœ‰å˜é‡éƒ½åˆå§‹åŒ–ä¸ºæ•°å€¼ 10 äº†ï¼Œä½†ä¸ºä½•ä¼šå‡ºç° `i1 == i2 is [false` è€Œ `i1 == i4 is [true]` ï¼Ÿ

åŸå› åœ¨äºï¼š

- i1ã€i2 éƒ½æ˜¯åŒ…è£…ç±»ï¼Œä½¿ç”¨ `==` æ—¶ï¼ŒJava å°†å®ƒä»¬å½“åšä¸¤ä¸ªå¯¹è±¡ï¼Œè€Œéä¸¤ä¸ª int å€¼æ¥æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡è‡ªç„¶æ˜¯ä¸ç›¸ç­‰çš„ã€‚æ­£ç¡®çš„æ¯”è¾ƒæ“ä½œåº”è¯¥ä½¿ç”¨ `equals` æ–¹æ³•ã€‚
- i1 æ˜¯åŒ…è£…ç±»ï¼Œi4 æ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œä½¿ç”¨ `==` æ—¶ï¼ŒJava ä¼šå°†ä¸¤ä¸ª i1 è¿™ä¸ªåŒ…è£…ç±»å¯¹è±¡è‡ªåŠ¨æ‹†ç®±ä¸ºä¸€ä¸ª `int` å€¼ï¼Œå†ä»£å…¥åˆ° `==` è¿ç®—è¡¨è¾¾å¼ä¸­è®¡ç®—ï¼›æœ€ç»ˆï¼Œç›¸å½“äºä¸¤ä¸ª `int` è¿›è¡Œæ¯”è¾ƒï¼Œç”±äºå€¼ç›¸åŒï¼Œæ‰€ä»¥ç»“æœç›¸ç­‰ã€‚

ã€ç¤ºä¾‹ã€‘åŒ…è£…ç±»åˆ¤ç­‰é—®é¢˜

```java
Integer a = 127; //Integer.valueOf(127)
Integer b = 127; //Integer.valueOf(127)
log.info("\nInteger a = 127;\nInteger b = 127;\na == b ? {}", a == b);    // true

Integer c = 128; //Integer.valueOf(128)
Integer d = 128; //Integer.valueOf(128)
log.info("\nInteger c = 128;\nInteger d = 128;\nc == d ? {}", c == d);   //false
//è®¾ç½®-XX:AutoBoxCacheMax=1000å†è¯•è¯•

Integer e = 127; //Integer.valueOf(127)
Integer f = new Integer(127); //new instance
log.info("\nInteger e = 127;\nInteger f = new Integer(127);\ne == f ? {}", e == f);   //false

Integer g = new Integer(127); //new instance
Integer h = new Integer(127); //new instance
log.info("\nInteger g = new Integer(127);\nInteger h = new Integer(127);\ng == h ? {}", g == h);  //false

Integer i = 128; //unbox
int j = 128;
log.info("\nInteger i = 128;\nint j = 128;\ni == j ? {}", i == j); //true
```

é€šè¿‡è¿è¡Œç»“æœå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶çœ‹èµ·æ¥æ°¸è¿œæ˜¯åœ¨å¯¹ 127 å’Œ 127ã€128 å’Œ 128 åˆ¤ç­‰ï¼Œä½† == å´å¹¶éæ€»æ˜¯è¿”å› trueã€‚

## è£…ç®±ã€æ‹†ç®±åº”ç”¨æ³¨æ„ç‚¹

1. è£…ç®±æ“ä½œä¼šåˆ›å»ºå¯¹è±¡ï¼Œé¢‘ç¹çš„è£…ç®±æ“ä½œä¼šé€ æˆä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—ï¼Œå½±å“æ€§èƒ½ã€‚æ‰€ä»¥**åº”è¯¥å°½é‡é¿å…è£…ç®±ã€‚**
2. åŸºç¡€æ•°æ®ç±»å‹çš„æ¯”è¾ƒæ“ä½œä½¿ç”¨ `==`ï¼ŒåŒ…è£…ç±»çš„æ¯”è¾ƒæ“ä½œä½¿ç”¨ `equals` æ–¹æ³•ã€‚